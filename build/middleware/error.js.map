{"version":3,"sources":["../../server/middleware/error.js"],"names":["exports","logErrors","err","req","res","next","console","error","stack","syscall","bind","port","code","process","exit","clientErrorHandler","xhr","status","send"],"mappings":";;AAAAA,QAAQC,SAAR,GAAoB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,IAAzB,EAA+B;AACjDC,UAAQC,KAAR,CAAcL,IAAIM,KAAlB;AACA,MAAID,MAAME,OAAN,KAAkB,QAAtB,EAAgC;AAC9B,UAAMF,KAAN;AACD;;AAED,MAAIG,OAAO,OAAOC,IAAP,KAAgB,QAAhB,GAA2B,UAAUA,IAArC,GAA4C,UAAUA,IAAjE;;AAEA;AACA,UAAQJ,MAAMK,IAAd;AACE,SAAK,QAAL;AACEN,cAAQC,KAAR,CAAcG,OAAO,+BAArB;AACAG,cAAQC,IAAR,CAAa,CAAb;AACA;AACF,SAAK,YAAL;AACER,cAAQC,KAAR,CAAcG,OAAO,oBAArB;AACAG,cAAQC,IAAR,CAAa,CAAb;AACA;AACF;AACE,YAAMP,KAAN;AAVJ;AAYAF,OAAKH,GAAL;AACD,CAtBD;;AAwBAF,QAAQe,kBAAR,GAA6B,UAAUb,GAAV,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,IAAzB,EAA+B;AAC1D,MAAIF,IAAIa,GAAR,EAAa;AACXZ,QAAIa,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBX,aAAO;AADY,KAArB;AAGD,GAJD,MAIO;AACLF,SAAKH,GAAL;AACD;AACF,CARD","file":"error.js","sourcesContent":["exports.logErrors = function (err, req, res, next) {\n  console.error(err.stack);\n  if (error.syscall !== 'listen') {\n    throw error;\n  }\n\n  var bind = typeof port === 'string' ? 'Pipe ' + port : 'Port ' + port;\n\n  // handle specific listen errors with friendly messages\n  switch (error.code) {\n    case 'EACCES':\n      console.error(bind + ' requires elevated privileges');\n      process.exit(1);\n      break;\n    case 'EADDRINUSE':\n      console.error(bind + ' is already in use');\n      process.exit(1);\n      break;\n    default:\n      throw error;\n  }\n  next(err);\n}\n\nexports.clientErrorHandler = function (err, req, res, next) {\n  if (req.xhr) {\n    res.status(500).send({\n      error: 'Something failed!'\n    })\n  } else {\n    next(err);\n  }\n}\n"]}