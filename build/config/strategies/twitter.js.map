{"version":3,"sources":["../../../server/config/strategies/twitter.js"],"names":["passport","require","url","TwitterStrategy","Strategy","config","users","module","exports","use","consumerKey","twitter","clientID","consumerSecret","clientSecret","callbackURL","passReqToCallback","req","token","tokenSecret","profile","done","providerData","_json","providerUserProfile","fullName","displayName","username","provider","providerId","id","saveOAuthUserProfile"],"mappings":"AAAA;AACA;;AAEA;;AACA,IAAIA,WAAWC,QAAQ,UAAR,CAAf;AAAA,IACCC,MAAMD,QAAQ,KAAR,CADP;AAAA,IAECE,kBAAkBF,QAAQ,kBAAR,EAA4BG,QAF/C;AAAA,IAGCC,SAASJ,QAAQ,WAAR,CAHV;AAAA,IAICK,QAAQL,QAAQ,+CAAR,CAJT;;AAMA;AACAM,OAAOC,OAAP,GAAiB,YAAW;AAC3B;AACAR,UAASS,GAAT,CAAa,IAAIN,eAAJ,CAAoB;AAC/BO,eAAaL,OAAOM,OAAP,CAAeC,QADG;AAE/BC,kBAAgBR,OAAOM,OAAP,CAAeG,YAFA;AAG/BC,eAAaV,OAAOM,OAAP,CAAeI,WAHG;AAI/BC,qBAAmB;AAJY,EAApB,EAMZ,UAASC,GAAT,EAAcC,KAAd,EAAqBC,WAArB,EAAkCC,OAAlC,EAA2CC,IAA3C,EAAiD;AAChD;AACA,MAAIC,eAAeF,QAAQG,KAA3B;AACAD,eAAaJ,KAAb,GAAqBA,KAArB;AACAI,eAAaH,WAAb,GAA2BA,WAA3B;;AAEA;AACA,MAAIK,sBAAsB;AACzBC,aAAUL,QAAQM,WADO;AAEzBC,aAAUP,QAAQO,QAFO;AAGzBC,aAAU,SAHe;AAIzBC,eAAYT,QAAQU,EAJK;AAKzBR,iBAAcA;AALW,GAA1B;;AAQA;AACAhB,QAAMyB,oBAAN,CAA2Bd,GAA3B,EAAgCO,mBAAhC,EAAqDH,IAArD;AACA,EAvBW,CAAb;AAyBA,CA3BD","file":"twitter.js","sourcesContent":["// Invoke 'strict' JavaScript mode\n'use strict';\n\n// Load the module dependencies\nvar passport = require('passport'),\n\turl = require('url'),\n\tTwitterStrategy = require('passport-twitter').Strategy,\n\tconfig = require('../config'),\n\tusers = require('../../app/controllers/users.server.controller');\n\n// Create the Twitter strategy configuration method\nmodule.exports = function() {\n\t// Use the Passport's Twitter strategy \n\tpassport.use(new TwitterStrategy({\n\t\t\tconsumerKey: config.twitter.clientID,\n\t\t\tconsumerSecret: config.twitter.clientSecret,\n\t\t\tcallbackURL: config.twitter.callbackURL,\n\t\t\tpassReqToCallback: true\n\t\t},\n\t\tfunction(req, token, tokenSecret, profile, done) {\n\t\t\t// Set the user's provider data and include tokens\n\t\t\tvar providerData = profile._json;\n\t\t\tproviderData.token = token;\n\t\t\tproviderData.tokenSecret = tokenSecret;\n\n\t\t\t// Create the user OAuth profile\n\t\t\tvar providerUserProfile = {\n\t\t\t\tfullName: profile.displayName,\n\t\t\t\tusername: profile.username,\n\t\t\t\tprovider: 'twitter',\n\t\t\t\tproviderId: profile.id,\n\t\t\t\tproviderData: providerData\n\t\t\t};\n\n\t\t\t// Save the user OAuth profile\n\t\t\tusers.saveOAuthUserProfile(req, providerUserProfile, done);\n\t\t}\n\t));\n};"]}